-- マイグレーション029: visitsテーブルを簡素化
-- visit_count と memo カラムを削除し、シンプルな訪問済み/未訪問管理に変更

-- ===============================
-- 1. 既存のカラムを削除
-- ===============================

ALTER TABLE visits DROP COLUMN IF EXISTS visit_count;
ALTER TABLE visits DROP COLUMN IF EXISTS memo;

-- ===============================
-- 2. コメント更新
-- ===============================

COMMENT ON TABLE visits IS 'ユーザーが訪問した街の記録（街ごとに1レコード、訪問有無のみ管理）';
COMMENT ON COLUMN visits.visited_at IS '訪問した日時';

-- ===============================
-- 注意事項
-- ===============================

-- このマイグレーションにより、visit_count（訪問回数）とmemo（メモ）データは失われます。
-- 訪問済み/未訪問のシンプルなトグル機能のみ提供します。
