# 街コレ（Machikore）テスト観点表

このドキュメントは、街コレアプリのテスト観点を網羅的にまとめたものです。
将来的にMaestroを使用したE2Eテストの自動化を想定しています。

---

## 目次

1. [テスト対象の概要](#テスト対象の概要)
2. [機能別テスト観点](#機能別テスト観点)
   - [認証機能](#1-認証機能)
   - [タブナビゲーション](#2-タブナビゲーション)
   - [ホームタブ](#3-ホームタブ)
   - [発見タブ](#4-発見タブ)
   - [マップ機能](#5-マップ機能)
   - [スポット機能](#6-スポット機能)
   - [コメント機能](#7-コメント機能)
   - [いいね機能](#8-いいね機能)
   - [ブックマーク機能](#9-ブックマーク機能)
   - [フォロー機能](#10-フォロー機能)
   - [通知機能](#11-通知機能)
   - [マイページ](#12-マイページ)
   - [検索機能](#13-検索機能)
   - [コレクション機能](#14-コレクション機能)
   - [スケジュール機能](#15-スケジュール機能)
3. [非機能テスト観点](#非機能テスト観点)
4. [Maestro自動テスト対応表](#maestro自動テスト対応表)

---

## テスト対象の概要

| 項目 | 数 |
|------|-----|
| 画面数 | 51+ |
| エンティティ数 | 27 |
| 機能（Features）数 | 46 |
| ウィジェット数 | 42 |

### アーキテクチャ

- **Feature-Sliced Design (FSD)** を採用
- **Supabase** をメインデータストアとして使用
- **SQLite** をローカルキャッシュとして使用
- **Mapbox** を地図表示に使用

---

## 機能別テスト観点

### 1. 認証機能

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| AUTH-001 | OAuth認証（Google）でサインインできる | 高 | 手動 | OAuth画面は自動化困難 |
| AUTH-002 | OAuth認証（Apple）でサインインできる | 高 | 手動 | OAuth画面は自動化困難 |
| AUTH-003 | サインアウトできる | 高 | 可 | |
| AUTH-004 | 未認証状態で認証が必要な機能にアクセスすると認証モーダルが表示される | 高 | 可 | |
| AUTH-005 | 認証状態がアプリ再起動後も維持される | 高 | 可 | |
| AUTH-006 | 認証エラー時に適切なエラーメッセージが表示される | 中 | 可 | |
| AUTH-007 | オンボーディング画面が初回起動時に表示される | 中 | 可 | |

### 2. タブナビゲーション

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| NAV-001 | ホームタブに遷移できる | 高 | 可 | |
| NAV-002 | 発見タブに遷移できる | 高 | 可 | |
| NAV-003 | 作成タブをタップするとマップ作成画面（認証済み）または認証モーダル（未認証）が表示される | 高 | 可 | |
| NAV-004 | 通知タブに遷移できる（認証済み）または認証モーダルが表示される（未認証） | 高 | 可 | |
| NAV-005 | マイページタブに遷移できる | 高 | 可 | |
| NAV-006 | タブ切り替え時にスクロール位置が維持される | 中 | 可 | |
| NAV-007 | 未読通知がある場合、通知タブにバッジが表示される | 中 | 可 | |

### 3. ホームタブ

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| HOME-001 | おすすめマップフィードが表示される | 高 | 可 | |
| HOME-002 | フォロー中タブに切り替えできる | 高 | 可 | |
| HOME-003 | フォロー中のユーザーのマップが表示される | 高 | 可 | |
| HOME-004 | マップカードをタップするとマップ詳細画面に遷移する | 高 | 可 | |
| HOME-005 | フィードを下にスクロールして追加データを読み込める（ページネーション） | 中 | 可 | |
| HOME-006 | プルダウンでリフレッシュできる | 中 | 可 | |

### 4. 発見タブ

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| DISC-001 | 検索バーが表示される | 高 | 可 | |
| DISC-002 | カテゴリフィルターが表示される | 高 | 可 | |
| DISC-003 | カテゴリを選択するとフィルターされたマップが表示される | 高 | 可 | |
| DISC-004 | 特集カルーセルが表示される | 中 | 可 | |
| DISC-005 | 特集をタップすると特集詳細画面に遷移する | 中 | 可 | |
| DISC-006 | 今日のピックセクションが表示される | 中 | 可 | |
| DISC-007 | 人気マップセクションが表示される | 中 | 可 | |
| DISC-008 | 地域セクション（県別）が表示される | 中 | 可 | |
| DISC-009 | 世界セクション（国別）が表示される | 中 | 可 | |
| DISC-010 | ランキングを見ることができる | 中 | 可 | |

### 5. マップ機能

#### 5.1 マップ詳細

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| MAP-001 | マップ詳細画面が表示される | 高 | 可 | |
| MAP-002 | マップタイトル・説明が表示される | 高 | 可 | |
| MAP-003 | マップ上にスポットピンが表示される | 高 | 可 | |
| MAP-004 | スポットピンをタップするとスポット詳細に遷移する | 高 | 可 | |
| MAP-005 | マップのズーム操作ができる | 中 | 可 | |
| MAP-006 | マップのパン操作ができる | 中 | 可 | |
| MAP-007 | マップ記事コンテンツが表示される | 中 | 可 | |
| MAP-008 | 作成者情報が表示される | 中 | 可 | |
| MAP-009 | 作成者をタップするとユーザープロフィールに遷移する | 中 | 可 | |

#### 5.2 マップ作成

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| MAP-010 | マップ作成画面に遷移できる | 高 | 可 | |
| MAP-011 | マップタイトルを入力できる | 高 | 可 | |
| MAP-012 | マップ説明を入力できる | 高 | 可 | |
| MAP-013 | カテゴリを選択できる | 高 | 可 | |
| MAP-014 | マップを保存できる | 高 | 可 | |
| MAP-015 | 必須項目が未入力の場合、バリデーションエラーが表示される | 高 | 可 | |
| MAP-016 | カバー画像を設定できる | 中 | 可 | |

#### 5.3 マップ編集

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| MAP-017 | 自分のマップを編集画面で開ける | 高 | 可 | |
| MAP-018 | タイトル・説明を編集できる | 高 | 可 | |
| MAP-019 | 編集を保存できる | 高 | 可 | |
| MAP-020 | 他人のマップは編集できない | 高 | 可 | |
| MAP-021 | マップを削除できる | 中 | 可 | |

### 6. スポット機能

#### 6.1 スポット詳細

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| SPOT-001 | スポット詳細画面が表示される | 高 | 可 | |
| SPOT-002 | スポット名・説明が表示される | 高 | 可 | |
| SPOT-003 | スポット画像が表示される | 高 | 可 | |
| SPOT-004 | スポットの位置情報が表示される | 中 | 可 | |
| SPOT-005 | マスタースポット情報が表示される（該当する場合） | 中 | 可 | |

#### 6.2 スポット作成

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| SPOT-006 | スポット作成画面に遷移できる | 高 | 可 | |
| SPOT-007 | 場所を検索して選択できる | 高 | 可 | |
| SPOT-008 | ピンをドロップして場所を指定できる | 高 | 可 | |
| SPOT-009 | スポット名を入力できる | 高 | 可 | |
| SPOT-010 | スポット説明を入力できる | 高 | 可 | |
| SPOT-011 | 画像を追加できる | 高 | 可 | |
| SPOT-012 | スポットを保存できる | 高 | 可 | |
| SPOT-013 | 必須項目が未入力の場合、バリデーションエラーが表示される | 高 | 可 | |

#### 6.3 スポット編集

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| SPOT-014 | 自分のスポットを編集画面で開ける | 高 | 可 | |
| SPOT-015 | スポット情報を編集できる | 高 | 可 | |
| SPOT-016 | 編集を保存できる | 高 | 可 | |
| SPOT-017 | 他人のスポットは編集できない | 高 | 可 | |
| SPOT-018 | スポットを削除できる | 中 | 可 | |

### 7. コメント機能

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| CMT-001 | スポットのコメント一覧が表示される | 高 | 可 | |
| CMT-002 | マップのコメント一覧が表示される | 高 | 可 | |
| CMT-003 | コメントを投稿できる（認証済み） | 高 | 可 | |
| CMT-004 | 未認証時にコメント投稿しようとすると認証モーダルが表示される | 高 | 可 | |
| CMT-005 | コメントにリプライできる | 中 | 可 | |
| CMT-006 | リプライを表示できる | 中 | 可 | |
| CMT-007 | 自分のコメントを編集できる | 中 | 可 | |
| CMT-008 | 自分のコメントを削除できる | 中 | 可 | |
| CMT-009 | 他人のコメントは編集・削除できない | 中 | 可 | |
| CMT-010 | コメント投稿者をタップするとプロフィールに遷移する | 低 | 可 | |

### 8. いいね機能

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| LIKE-001 | マップにいいねできる（認証済み） | 高 | 可 | |
| LIKE-002 | マップのいいねを解除できる | 高 | 可 | |
| LIKE-003 | いいね数が正しく表示される | 高 | 可 | |
| LIKE-004 | 未認証時にいいねしようとすると認証モーダルが表示される | 高 | 可 | |
| LIKE-005 | いいねしたマップ一覧を確認できる | 中 | 可 | |
| LIKE-006 | いいねしたユーザー一覧を確認できる | 低 | 可 | |

### 9. ブックマーク機能

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| BM-001 | マップをブックマークできる（認証済み） | 高 | 可 | |
| BM-002 | ブックマークを解除できる | 高 | 可 | |
| BM-003 | 未認証時にブックマークしようとすると認証モーダルが表示される | 高 | 可 | |
| BM-004 | ブックマークフォルダを作成できる | 中 | 可 | |
| BM-005 | ブックマークをフォルダに振り分けられる | 中 | 可 | |
| BM-006 | ブックマーク一覧を確認できる | 中 | 可 | |
| BM-007 | フォルダ別にブックマークを表示できる | 中 | 可 | |
| BM-008 | ブックマークフォルダを削除できる | 低 | 可 | |

### 10. フォロー機能

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| FLW-001 | ユーザーをフォローできる（認証済み） | 高 | 可 | |
| FLW-002 | フォローを解除できる | 高 | 可 | |
| FLW-003 | 未認証時にフォローしようとすると認証モーダルが表示される | 高 | 可 | |
| FLW-004 | フォロー中のユーザー一覧を確認できる | 中 | 可 | |
| FLW-005 | フォロワー一覧を確認できる | 中 | 可 | |
| FLW-006 | フォロー数・フォロワー数が正しく表示される | 中 | 可 | |

### 11. 通知機能

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| NTF-001 | 通知一覧が表示される | 高 | 可 | |
| NTF-002 | お知らせ一覧が表示される | 高 | 可 | |
| NTF-003 | 未読通知にバッジが表示される | 中 | 可 | |
| NTF-004 | 通知をタップすると該当コンテンツに遷移する | 中 | 可 | |
| NTF-005 | 通知を既読にできる | 中 | 可 | |
| NTF-006 | 通知設定を変更できる | 低 | 可 | |

### 12. マイページ

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| MY-001 | プロフィール情報が表示される | 高 | 可 | |
| MY-002 | 統計情報（マップ数、フォロワー数等）が表示される | 高 | 可 | |
| MY-003 | 自分のマップ一覧が表示される | 高 | 可 | |
| MY-004 | コレクション一覧が表示される | 高 | 可 | |
| MY-005 | ブックマーク一覧が表示される | 高 | 可 | |
| MY-006 | タブ切り替え（マップ/コレクション/ブックマーク）ができる | 高 | 可 | |
| MY-007 | プロフィール編集画面に遷移できる | 中 | 可 | |
| MY-008 | プロフィール画像を変更できる | 中 | 可 | |
| MY-009 | 表示名を変更できる | 中 | 可 | |
| MY-010 | 自己紹介を変更できる | 中 | 可 | |
| MY-011 | 設定画面に遷移できる | 中 | 可 | |
| MY-012 | 未認証時は認証誘導ページが表示される | 高 | 可 | |

### 13. 検索機能

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| SRC-001 | 検索バーにキーワードを入力できる | 高 | 可 | |
| SRC-002 | マップを検索できる | 高 | 可 | |
| SRC-003 | 場所を検索できる（Google Places連携） | 高 | 可 | |
| SRC-004 | 検索結果が表示される | 高 | 可 | |
| SRC-005 | 検索結果をタップすると詳細画面に遷移する | 高 | 可 | |
| SRC-006 | 検索履歴が保存される | 中 | 可 | |
| SRC-007 | 検索履歴から検索できる | 中 | 可 | |
| SRC-008 | 検索履歴を削除できる | 低 | 可 | |
| SRC-009 | クイック検索ボタンで検索できる | 低 | 可 | |

### 14. コレクション機能

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| COL-001 | コレクション詳細画面が表示される | 中 | 可 | |
| COL-002 | コレクションを作成できる | 中 | 可 | |
| COL-003 | コレクションにマップを追加できる | 中 | 可 | |
| COL-004 | コレクションからマップを削除できる | 中 | 可 | |
| COL-005 | コレクションを編集できる | 中 | 可 | |
| COL-006 | コレクションを削除できる | 低 | 可 | |

### 15. スケジュール機能

| ID | テスト観点 | 優先度 | 自動化 | 備考 |
|----|----------|--------|--------|------|
| SCH-001 | スケジュール画面が表示される | 中 | 可 | |
| SCH-002 | スケジュールを作成できる | 中 | 可 | |
| SCH-003 | スケジュールにスポットを追加できる | 中 | 可 | |
| SCH-004 | スケジュールを編集できる | 中 | 可 | |
| SCH-005 | スケジュールを削除できる | 低 | 可 | |

---

## 非機能テスト観点

### パフォーマンス

| ID | テスト観点 | 優先度 | 備考 |
|----|----------|--------|------|
| PERF-001 | 大量のマップ（100件以上）を表示してもスクロールがスムーズ | 高 | |
| PERF-002 | 画像の遅延読み込みが正しく動作する | 中 | |
| PERF-003 | アプリ起動時間が5秒以内 | 中 | |
| PERF-004 | 画面遷移が1秒以内 | 中 | |

### オフライン対応

| ID | テスト観点 | 優先度 | 備考 |
|----|----------|--------|------|
| OFF-001 | オフライン時にキャッシュされたデータを表示できる | 中 | |
| OFF-002 | オフライン時に適切なエラーメッセージが表示される | 中 | |
| OFF-003 | オンライン復帰時にデータが同期される | 中 | |

### エラーハンドリング

| ID | テスト観点 | 優先度 | 備考 |
|----|----------|--------|------|
| ERR-001 | APIエラー時に適切なエラーメッセージが表示される | 高 | |
| ERR-002 | ネットワークエラー時にリトライできる | 中 | |
| ERR-003 | 入力バリデーションエラーが適切に表示される | 高 | |

### セキュリティ

| ID | テスト観点 | 優先度 | 備考 |
|----|----------|--------|------|
| SEC-001 | 認証トークンが適切に管理されている | 高 | |
| SEC-002 | 他人のデータを不正に操作できない | 高 | |
| SEC-003 | センシティブ情報がログに出力されない | 中 | |

### アクセシビリティ

| ID | テスト観点 | 優先度 | 備考 |
|----|----------|--------|------|
| A11Y-001 | 画面リーダーで読み上げられる | 低 | |
| A11Y-002 | 十分なコントラスト比がある | 低 | |
| A11Y-003 | タッチターゲットが十分な大きさ | 低 | |

---

## Maestro自動テスト対応表

以下は、Maestroで自動化するテストシナリオの優先順位です。

### Phase 1: 基本フロー（最優先）

| シナリオ | 対応テストID | Maestroファイル |
|---------|-------------|----------------|
| タブ間ナビゲーション | NAV-001〜005 | `e2e/maestro/navigation/tab-navigation.yaml` |
| ホームフィード表示 | HOME-001〜004 | `e2e/maestro/home/feed-display.yaml` |
| マップ詳細表示 | MAP-001〜004 | `e2e/maestro/map/map-detail.yaml` |
| 検索フロー | SRC-001〜005 | `e2e/maestro/search/basic-search.yaml` |

### Phase 2: CRUD操作

| シナリオ | 対応テストID | Maestroファイル |
|---------|-------------|----------------|
| マップ作成フロー | MAP-010〜016 | `e2e/maestro/map/create-map.yaml` |
| スポット作成フロー | SPOT-006〜013 | `e2e/maestro/spot/create-spot.yaml` |
| コメント投稿フロー | CMT-001〜005 | `e2e/maestro/comment/add-comment.yaml` |

### Phase 3: ユーザーインタラクション

| シナリオ | 対応テストID | Maestroファイル |
|---------|-------------|----------------|
| いいねフロー | LIKE-001〜004 | `e2e/maestro/interaction/like.yaml` |
| ブックマークフロー | BM-001〜003 | `e2e/maestro/interaction/bookmark.yaml` |
| フォローフロー | FLW-001〜003 | `e2e/maestro/interaction/follow.yaml` |

### Phase 4: 認証・プロフィール

| シナリオ | 対応テストID | Maestroファイル |
|---------|-------------|----------------|
| 未認証時の動作 | AUTH-004, CMT-004, LIKE-004 | `e2e/maestro/auth/unauthenticated.yaml` |
| プロフィール編集 | MY-007〜010 | `e2e/maestro/profile/edit-profile.yaml` |

---

## 更新履歴

| 日付 | 更新内容 | 更新者 |
|------|---------|--------|
| 2025-01-10 | 初版作成 | - |
