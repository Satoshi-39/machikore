# public.user_latest_agreements

## Description

ユーザーの最新の同意情報

<details>
<summary><strong>Table Definition</strong></summary>

```sql
CREATE VIEW user_latest_agreements AS (
 SELECT DISTINCT ON (ta.user_id) ta.id,
    ta.user_id,
    ta.terms_version_id,
    ta.privacy_version_id,
    ta.agreed_at,
    tv_terms.version AS terms_version,
    tv_privacy.version AS privacy_version
   FROM ((terms_agreements ta
     JOIN terms_versions tv_terms ON ((ta.terms_version_id = tv_terms.id)))
     JOIN terms_versions tv_privacy ON ((ta.privacy_version_id = tv_privacy.id)))
  ORDER BY ta.user_id, ta.agreed_at DESC
)
```

</details>

## Columns

| Name | Type | Default | Nullable | Children | Parents | Comment |
| ---- | ---- | ------- | -------- | -------- | ------- | ------- |
| id | uuid |  | true |  |  |  |
| user_id | uuid |  | true |  |  |  |
| terms_version_id | uuid |  | true |  |  |  |
| privacy_version_id | uuid |  | true |  |  |  |
| agreed_at | timestamp with time zone |  | true |  |  |  |
| terms_version | text |  | true |  |  |  |
| privacy_version | text |  | true |  |  |  |

## Referenced Tables

| Name | Columns | Comment | Type |
| ---- | ------- | ------- | ---- |
| [public.terms_agreements](public.terms_agreements.md) | 8 | ユーザーの利用規約・プライバシーポリシー同意履歴 | BASE TABLE |
| [public.terms_versions](public.terms_versions.md) | 8 | 利用規約・プライバシーポリシーのバージョン管理 | BASE TABLE |

## Relations

![er](public.user_latest_agreements.svg)

---

> Generated by [tbls](https://github.com/k1LoW/tbls)
